---
const time = [
	{ label: "Days", id: "htw-days" },
	{ label: "Hours", id: "htw-hours" },
	{ label: "Minutes", id: "htw-minutes" },
	{ label: "Seconds", id: "htw-seconds" },
];
---

<div class="grid grid-cols-19 font-angry tracking-widest text-center">
	{
		time.map(({ label, id }, index) => (
			<>
				<div class="col-span-4 flex flex-col">
					<p class="text-4xl sm:text-5xl md:text-7xl lg:text-8xl xl:text-9xl m-0!">
						<span id={id}>00</span>
					</p>
					<p class="text-xl sm:text-2xl md:text-4xl lg:text-5xl xl:text-6xl m-0!">
						{label}
					</p>
				</div>

				{index < time.length - 1 && (
					<div class="col-span-1">
						<p class="text-5xl sm:text-6xl md:text-7xl lg:text-8xl xl:text-9xl m-0!">
							:
						</p>
					</div>
				)}
			</>
		))
	}
</div>

<script>
	// Target time: 20 Dec 2025, 12:00 AM IST (UTC+05:30) = 2025-12-19T18:30:00Z
	const TARGET_TS = new Date("2025-12-19T18:30:00Z").getTime();

	function updateCountdown() {
		const now = Date.now();
		let diff = TARGET_TS - now;

		if (diff < 0) {
			diff = 0;
		}

		const dayMs = 24 * 60 * 60 * 1000;
		const hourMs = 60 * 60 * 1000;
		const minMs = 60 * 1000;

		const days = Math.floor(diff / dayMs);
		diff %= dayMs;
		const hours = Math.floor(diff / hourMs);
		diff %= hourMs;
		const minutes = Math.floor(diff / minMs);
		diff %= minMs;
		const seconds = Math.floor(diff / 1000);

		const dEl = document.getElementById("htw-days");
		const hEl = document.getElementById("htw-hours");
		const mEl = document.getElementById("htw-minutes");
		const sEl = document.getElementById("htw-seconds");

		if (dEl && hEl && mEl && sEl) {
			dEl.textContent = String(days);
			hEl.textContent = String(hours).padStart(2, "0");
			mEl.textContent = String(minutes).padStart(2, "0");
			sEl.textContent = String(seconds).padStart(2, "0");
		}
	}

	function start() {
		updateCountdown();
		const handle = window.setInterval(() => {
			updateCountdown();
			if (Date.now() >= TARGET_TS) {
				clearInterval(handle);
			}
		}, 1000);
	}

	if (document.readyState === "loading") {
		document.addEventListener("DOMContentLoaded", start, { once: true });
	} else {
		start();
	}
</script>
